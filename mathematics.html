<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Mathematics | REAL Learning</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body { font-family: Arial, sans-serif; margin: 0; background: #f5f5f5; color: #222; line-height: 1.6; }
    header { background: #111; color: #fff; }
    section { padding: 40px 20px; max-width: 900px; margin: auto; }
    .navbar { display: flex; justify-content: space-between; background: #000; padding: 12px 20px; }
    .logo { color: white; font-weight: bold; }
    .menu a { color: white; margin-left: 15px; text-decoration: none; }
    footer { background: #222; color: #ccc; text-align: center; padding: 20px; }
    .block { background: white; padding: 20px; margin-bottom: 20px; border-left: 5px solid #111; }
    .toggle-btn { background: #111; color: #fff; border: none; padding: 8px 14px; cursor: pointer; margin-top: 8px; }
    .toggle-btn:hover { background: #333; }
    .class-content { display: none; }
    .chapter-list { display: none; margin-top: 15px; padding-left: 20px; }
  </style>
</head>

<body>

<header>
  <nav class="navbar">
    <div class="logo">REAL Learning</div>
    <div class="menu">
      <a href="index.html">Home</a>
      <a href="subjects.html">Subjects</a>
    </div>
  </nav>
</header>

<section>
  <h1>Mathematics</h1>
  <p>Mathematics is the study of structure, relationships, and necessity.</p>

  <label><strong>Select Class:</strong></label><br>
  <select id="classSelect" onchange="showClassContent()">
    <option value="">-- Choose Class --</option>
    <option value="5">Class 5</option>
  </select>
</section>

<section id="class5" class="block class-content">
  <h2>Class 5 Mathematics</h2>

  <button class="toggle-btn" onclick="toggleChapters('chapters5')">View Chapter Index</button>

  <ul id="chapters5" class="chapter-list">
    <li>
      <button class="toggle-btn" onclick="openChapter('travellers1')">
        We the Travellers â€“ I
      </button>
    </li>
  </ul>
</section>

<!-- MODULE VIEWER -->
<section id="chapterModuleBox" class="block" style="display:none;">
  <h3 id="chapterTitle"></h3>

  <div id="moduleList"></div>

  <div id="moduleEngine" style="display:none; margin-top:20px;">
    <h4 id="mTitle"></h4>
    <p id="mText"></p>

    <p><strong>Question:</strong></p>
    <p id="mQuestion"></p>

    <input id="mAnswer" style="width:100%; padding:8px;">
    <button class="toggle-btn" onclick="submitModuleAnswer()">Submit</button>

    <p id="mFeedback"></p>
    <p><strong>Score:</strong> <span id="mScore">0</span></p>
  </div>
</section>

<footer>
  <p>Â© 2026 REAL Learning</p>
</footer>

<script>
/* ===== CLASS SELECTION & TOGGLE ===== */
function showClassContent() {
  document.querySelectorAll('.class-content').forEach(s => s.style.display = 'none');
  const c = document.getElementById('classSelect').value;
  if (c) document.getElementById('class' + c).style.display = 'block';
}

function toggleChapters(id) {
  const el = document.getElementById(id);
  el.style.display = el.style.display === 'block' ? 'none' : 'block';
}

/* ===== MODULE REGISTRY (SAFE FOR MULTIPLE FILES) ===== */
window.REAL_MODULES = window.REAL_MODULES || {};

/* ===== MODULE ENGINE ===== */
let activeChapter, activeModule, lessonIndex = 0, score = 0;

function openChapter(key) {
  activeChapter = REAL_MODULES[key];
  if (!activeChapter) return alert("Modules coming soon.");

  document.getElementById("chapterModuleBox").style.display = "block";
  document.getElementById("chapterTitle").innerText = activeChapter.title;

  const list = document.getElementById("moduleList");
  list.innerHTML = "";
  activeChapter.modules.forEach((m, i) => {
    const b = document.createElement("button");
    b.className = "toggle-btn";
    b.innerText = m.name;
    b.onclick = () => startModule(i);
    list.appendChild(b);
  });
}

function startModule(i) {
  activeModule = activeChapter.modules[i];
  lessonIndex = 0;
  score = 0;
  document.getElementById("mScore").innerText = score;
  document.getElementById("mAnswer").style.display = "block";
  document.getElementById("moduleEngine").style.display = "block";
  loadLesson();
}

function loadLesson() {
  const l = activeModule.lessons[lessonIndex];
  document.getElementById("mTitle").innerText = l.title;
  document.getElementById("mText").innerText = l.text;
  document.getElementById("mQuestion").innerText = l.question;
  document.getElementById("mAnswer").value = "";
  document.getElementById("mFeedback").innerText = "";
}

function submitModuleAnswer() {
  const a = document.getElementById("mAnswer").value;
  const lesson = activeModule.lessons[lessonIndex];

  if (lesson.check(a)) {
    score += lesson.points || 10; // default 10 points
    document.getElementById("mScore").innerText = score;
    lessonIndex++;
    if (lessonIndex < activeModule.lessons.length) {
      loadLesson();
      document.getElementById("mFeedback").innerText = "âœ… Correct! Lesson unlocked.";
    } else {
      document.getElementById("mTitle").innerText = "ðŸŽ‰ Module Completed";
      document.getElementById("mText").innerText = "You have completed this module.";
      document.getElementById("mQuestion").innerText = "";
      document.getElementById("mAnswer").style.display = "none";
      document.getElementById("mFeedback").innerText = "";
    }
  } else {
    document.getElementById("mFeedback").innerText = "âŒ Try again.";
  }
}
</script>

<!-- LOAD MODULE FILES -->
<script src="modules/class5_travellers1.js"></script>

</body>
</html>
